module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},15861,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(93852);function f({children:a}){let f=(0,e.useAuth)(),g=(0,d.useRouter)();return((0,c.useEffect)(()=>{f?.user&&f?.token||g.push("/login")},[f,g]),f?.user&&f?.token)?(0,b.jsx)(b.Fragment,{children:a}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-lg",children:"Redirecting to login..."})})})}a.s(["ProtectedRoute",()=>f])},16189,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(93852),e=a.i(15861),f=a.i(72131),g=a.i(47033),h=a.i(71987);let i=[{path:"/dashboard",label:"Dashboard",icon:"/images/dashboard/mytask.png"},{path:"/todos",label:"Todos",icon:"/images/dashboard/todos.png"},{path:"/profile",label:"Account Information",icon:"/images/dashboard/info.png"}];function j({children:a}){let j=(0,c.useRouter)(),k=(0,c.usePathname)(),l=(0,d.useAuth)(),[m,n]=(0,f.useState)(null),[o,p]=(0,f.useState)(""),[q,r]=(0,f.useState)(""),[s,t]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{let a=new Date,b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()],c=a.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});p(b),r(c)},[]),(0,f.useEffect)(()=>{l?.token&&(0,g.getProfile)().then(a=>{n(a)}).catch(a=>{console.error("Failed to fetch profile:",a)})},[l?.token]),console.log(m),(0,b.jsx)(e.ProtectedRoute,{children:(0,b.jsx)("div",{className:"min-h-screen bg-[#E2ECF8] flex flex-col",children:(0,b.jsxs)("div",{className:"flex flex-1 relative",children:[s&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>t(!1)}),(0,b.jsxs)("aside",{className:`fixed md:static inset-y-0 left-0 z-50 w-64 bg-[#0D224A] text-white flex flex-col transform transition-transform duration-300 ease-in-out ${s?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[(0,b.jsx)("div",{className:"p-4  ",children:(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-0 md:flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 md:flex-col mt-15",children:[(0,b.jsx)("div",{className:"w-12 h-12 md:w-20 md:h-20 bg-gray-400 rounded-full flex items-center justify-center overflow-hidden flex-shrink-0",children:m?.profile_image?(0,b.jsx)("img",{src:m.profile_image,alt:"Profile",className:"w-full h-full object-cover"}):(0,b.jsx)("span",{className:"text-xl md:text-3xl"})}),(0,b.jsxs)("div",{className:"text-left md:text-center",children:[(0,b.jsx)("p",{className:"font-semibold text-sm md:text-lg",children:m?.first_name?.split(" ")[0]||"User"}),(0,b.jsx)("p",{className:"text-xs md:text-sm text-blue-200 mt-1 hidden md:block",children:l?.user?.email||""})]})]}),(0,b.jsx)("button",{onClick:()=>t(!1),className:"md:hidden text-white hover:text-gray-300 p-2",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,b.jsx)("nav",{className:"flex-1 overflow-y-auto mt-10",children:(0,b.jsx)("ul",{className:"space-y-2 ",children:i.map(a=>(0,b.jsx)("li",{children:(0,b.jsxs)("button",{onClick:()=>{j.push(a.path),t(!1)},className:`w-full flex items-center gap-3 px-8 py-4 transition-colors text-sm md:text-base ${k===a.path?"bg-linear-to-r from-[#1D3575] to-transparent ":"text-blue-200"}`,children:[(0,b.jsx)(h.default,{src:a.icon,alt:"logo",height:20,width:20}),(0,b.jsx)("span",{className:"font-medium",children:a.label})]})},a.path))})}),(0,b.jsx)("div",{className:"p-3 ",children:(0,b.jsxs)("button",{onClick:()=>{l&&(l.logout(),j.push("/login"))},className:"w-full flex items-center gap-2 md:gap-3 px-3 md:px-4 py-2 md:py-3 rounded-lg text-blue-200  text-sm md:text-base",children:[(0,b.jsx)(h.default,{src:"/images/dashboard/logout.png",alt:"logo",height:20,width:20}),(0,b.jsx)("span",{className:"font-medium",children:"Logout"})]})})]}),(0,b.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("header",{className:"bg-white py-6 mb-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between px-20",children:[(0,b.jsx)("button",{onClick:()=>t(!s),className:"md:hidden absolute left-3 md:left-6 text-gray-600 hover:text-gray-800 p-2",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,b.jsx)("div",{className:"",children:(0,b.jsx)(h.default,{src:"/images/dashboard/logo.png",alt:"logo",height:105,width:100})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 ",children:[(0,b.jsx)(h.default,{src:"/images/dashboard/notifications.png",alt:"logo",height:35,width:35}),(0,b.jsx)("button",{className:"hidden md:block text-gray-600 hover:text-gray-800",children:(0,b.jsx)(h.default,{src:"/images/dashboard/cal.png",alt:"logo",height:35,width:35})}),(0,b.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,b.jsx)("span",{className:"text-[#0D224A] font-medium text-[14px]",children:o}),(0,b.jsx)("span",{className:"text-[#0D224A] font-medium text-[14px]",children:q})]})]})]})}),a]})})]})})})}a.s(["default",()=>j],16189)},29123,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(93852),f=a.i(47033),g=a.i(71987);function h(){let a=(0,c.useRef)(null),h=(0,e.useAuth)(),i=(0,d.useRouter)(),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)({first_name:"",last_name:"",email:"",address:"",contact_number:"",birthday:""}),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),v=(0,c.useRef)(null);(0,c.useEffect)(()=>{h?.token&&(0,f.getProfile)().then(a=>{k(a),q({first_name:a.first_name||h?.user?.name?.split(" ")[0]||"",last_name:a.last_name||h?.user?.name?.split(" ")[1]||"",email:a.email||h?.user?.email||"",address:a.address||"",contact_number:a.contact_number||"",birthday:a.birthday?new Date(a.birthday).toISOString().split("T")[0]:""}),a.profile_image&&u(a.profile_image)}).catch(a=>{console.error("Failed to fetch profile:",a)}).finally(()=>m(!1))},[h?.token,h?.user]);let w=async()=>{if(!h?.token){alert("You are not authenticated. Please login again."),i.push("/login");return}o(!0);try{let a={first_name:p.first_name,last_name:p.last_name,email:p.email,address:p.address,contact_number:p.contact_number,birthday:p.birthday||void 0};r&&(a.profile_image=r);let b=await (0,f.updateProfile)(a);k(b),alert("Profile updated successfully!");let c=await (0,f.getProfile)();k(c),c.profile_image&&u(c.profile_image),s(null)}catch(a){console.error("Failed to update profile:",a),a.response?.status===401?(alert("Your session has expired. Please login again."),h.logout(),i.push("/login")):alert(a.response?.data?.detail||a.response?.data?.message||a.message||"Failed to update profile. Please try again.")}finally{o(!1)}};return l?(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-lg ",children:(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#274AFF] mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):(0,b.jsxs)("div",{className:"bg-white mx-10 pt-2 p-8 rounded-md",children:[(0,b.jsx)("h1",{className:" font-medium text-[24px] ",children:"Account Information"}),(0,b.jsx)("div",{className:"border-b-2 border-[#5272FF] w-[150px] mb-6"}),(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-6 border-2 w-[418px] px-6 py-4 rounded-xl",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-32 h-32 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden",children:t?(0,b.jsx)(g.default,{width:100,height:100,src:t,alt:"Profile",className:"w-full h-full object-cover"}):(0,b.jsx)("span",{className:""})}),(0,b.jsx)("button",{onClick:()=>v.current?.click(),className:"absolute bottom-0 right-0 bg-[#5272FF] rounded-full flex items-center justify-center cursor-pointer ",children:(0,b.jsx)("div",{children:(0,b.jsx)(g.default,{width:35,height:35,src:"/images/dashboard/button.png",alt:"Profile",className:""})})}),(0,b.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){s(b);let a=new FileReader;a.onloadend=()=>{u(a.result)},a.readAsDataURL(b)}},className:"hidden"})]}),(0,b.jsxs)("button",{onClick:()=>v.current?.click(),className:"px-6 py-3 bg-[#5272FF] text-white font-semibold rounded-lg  flex items-center gap-2 shadow-md",children:[(0,b.jsx)(g.default,{width:15,height:15,src:"/images/dashboard/upsvg.png",alt:"Profile",className:""}),"Upload New Photo"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6 border-2  px-6 py-4 rounded-xl",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),(0,b.jsx)("input",{type:"text",value:p.first_name,onChange:a=>q({...p,first_name:a.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-blue-100 text-gray-800"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),(0,b.jsx)("input",{type:"text",value:p.last_name,onChange:a=>q({...p,last_name:a.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg  focus:ring-blue-100 text-gray-800"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,b.jsx)("input",{type:"email",value:p.email,onChange:a=>q({...p,email:a.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg  focus:ring-blue-100 text-gray-800"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,b.jsx)("input",{type:"text",value:p.address,onChange:a=>q({...p,address:a.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-blue-100 text-gray-800"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),(0,b.jsx)("input",{type:"number",value:p.contact_number,onChange:a=>q({...p,contact_number:a.target.value}),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-blue-100 text-gray-800"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Birthday"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:p.birthday,readOnly:!0,className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-blue-100 text-gray-800 pr-10"}),(0,b.jsx)("input",{type:"date",ref:a,className:"absolute inset-0 opacity-0 w-full h-full cursor-pointer",onChange:a=>q({...p,birthday:a.target.value})}),(0,b.jsx)(g.default,{width:22,height:22,src:"/images/dashboard/datecal.png",alt:"calendar",className:"absolute right-3 top-1/2 -translate-y-1/2 cursor-pointer z-20",onClick:()=>a.current?.showPicker()})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-center gap-4 mt-8",children:[(0,b.jsx)("button",{onClick:w,disabled:n,className:"px-12 py-3 bg-[#5272FF] text-white font-semibold rounded-md flex items-center gap-2",children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):"Save Changes"}),(0,b.jsx)("button",{onClick:()=>i.push("/dashboard"),className:"px-18 py-3 bg-[#8CA3CD] text-white font-semibold rounded-md",children:"Cancel"})]})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a9185baa._.js.map