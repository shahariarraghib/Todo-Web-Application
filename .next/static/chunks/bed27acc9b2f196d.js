(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,r)=>{s.exports=e.r(76562)},26683,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(18566),t=e.i(4012);function d({children:e}){let d=(0,t.useAuth)(),l=(0,a.useRouter)();return((0,r.useEffect)(()=>{d?.user&&d?.token||l.push("/login")},[d,l]),d?.user&&d?.token)?(0,s.jsx)(s.Fragment,{children:e}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-lg",children:"Redirecting to login..."})})})}e.s(["ProtectedRoute",()=>d])},52859,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(18566),t=e.i(53145),d=e.i(38036);function l(){let{register:e,handleSubmit:l,watch:o,formState:{errors:i}}=(0,t.useForm)(),n=(0,a.useRouter)(),[c,m]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),w=o("new_password"),b=async e=>{m(""),p(""),h(!0);try{let{confirm_password:s,...r}=e;await (0,d.changePassword)(r),p("Password changed successfully!"),setTimeout(()=>{n.push("/profile")},2e3)}catch(e){m(e?.response?.data?.detail||e?.response?.data?.message||e?.message||"Failed to change password")}finally{h(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,s.jsxs)("form",{onSubmit:l(b),className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Change Password"}),(0,s.jsxs)("label",{className:"block mb-2",children:["Old Password",(0,s.jsx)("input",{...e("old_password",{required:"Old password is required"}),type:"password",className:"w-full mt-1 p-2 border rounded"}),i.old_password&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.old_password.message})]}),(0,s.jsxs)("label",{className:"block mb-2",children:["New Password",(0,s.jsx)("input",{...e("new_password",{required:"New password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:"password",className:"w-full mt-1 p-2 border rounded"}),i.new_password&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.new_password.message})]}),(0,s.jsxs)("label",{className:"block mb-4",children:["Confirm New Password",(0,s.jsx)("input",{...e("confirm_password",{required:"Please confirm your new password",validate:e=>e===w||"Passwords do not match"}),type:"password",className:"w-full mt-1 p-2 border rounded"}),i.confirm_password&&(0,s.jsx)("p",{className:"text-red-500 text-xs mt-1",children:i.confirm_password.message})]}),c&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:c}),u&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded text-green-700 text-sm",children:u}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>n.push("/profile"),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition",disabled:x,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded hover:bg-blue-700 transition disabled:opacity-50",disabled:x,children:x?"Changing...":"Change Password"})]})]})})}e.s(["default",()=>l])}]);