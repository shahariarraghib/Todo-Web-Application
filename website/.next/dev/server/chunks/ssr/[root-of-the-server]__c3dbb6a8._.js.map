{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/lib/apiHook.ts"],"sourcesContent":["import axios from \"axios\";\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE;\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport const setAuthToken = (token?: string) => {\r\n  if (token) api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n  else delete api.defaults.headers.common[\"Authorization\"];\r\n};\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;;;AAAA;;AACA,MAAM,WAAW,QAAQ,GAAG,CAAC,oBAAoB;AAEjD,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEO,MAAM,eAAe,CAAC;IAC3B,IAAI,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;SACtE,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;AAC1D;uCAEe"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/lib/auth.ts"],"sourcesContent":["// lib/auth.ts\r\nimport api, { setAuthToken } from \"./apiHook\";\r\n\r\nconst TOKEN_KEY = \"todo_token\";\r\n\r\nexport const saveToken = (token: string) => {\r\n  localStorage.setItem(TOKEN_KEY, token);\r\n  setAuthToken(token);\r\n};\r\n\r\nexport const loadToken = () => {\r\n  const t = localStorage.getItem(TOKEN_KEY);\r\n  if (t) setAuthToken(t);\r\n  return t;\r\n};\r\n\r\nexport const clearToken = () => {\r\n  localStorage.removeItem(TOKEN_KEY);\r\n  setAuthToken(undefined);\r\n};\r\n\r\n// Example API calls (shape may need slight changes to match actual API)\r\nexport const signup = async (data: {\r\n  name: string;\r\n  email: string;\r\n  password: string;\r\n}) => {\r\n  const res = await api.post(\"/auth/signup\", data);\r\n  return res.data;\r\n};\r\n\r\nexport const login = async (data: { email: string; password: string }) => {\r\n  const res = await api.post(\"/auth/login\", data);\r\n  return res.data;\r\n};\r\n\r\nexport const getProfile = async () => {\r\n  const res = await api.get(\"/me\");\r\n  return res.data;\r\n};\r\n\r\nexport const fetchTodos = async () => {\r\n  const res = await api.get(\"/todos\");\r\n  return res.data;\r\n};\r\n\r\nexport const createTodo = async (payload: {\r\n  title: string;\r\n  description?: string;\r\n}) => {\r\n  const res = await api.post(\"/todos\", payload);\r\n  return res.data;\r\n};\r\n\r\nexport const updateTodo = async (id: string, payload: any) => {\r\n  const res = await api.put(`/todos/${id}`, payload);\r\n  return res.data;\r\n};\r\n\r\nexport const deleteTodo = async (id: string) => {\r\n  const res = await api.delete(`/todos/${id}`);\r\n  return res.data;\r\n};\r\n\r\n// If API supports reorder endpoint:\r\nexport const reorderTodos = async (orderedIds: string[]) => {\r\n  const res = await api.post(\"/todos/reorder\", { orderedIds });\r\n  return res.data;\r\n};\r\n"],"names":[],"mappings":"AAAA,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;AACd;;AAEA,MAAM,YAAY;AAEX,MAAM,YAAY,CAAC;IACxB,aAAa,OAAO,CAAC,WAAW;IAChC,IAAA,8HAAY,EAAC;AACf;AAEO,MAAM,YAAY;IACvB,MAAM,IAAI,aAAa,OAAO,CAAC;IAC/B,IAAI,GAAG,IAAA,8HAAY,EAAC;IACpB,OAAO;AACT;AAEO,MAAM,aAAa;IACxB,aAAa,UAAU,CAAC;IACxB,IAAA,8HAAY,EAAC;AACf;AAGO,MAAM,SAAS,OAAO;IAK3B,MAAM,MAAM,MAAM,yHAAG,CAAC,IAAI,CAAC,gBAAgB;IAC3C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,QAAQ,OAAO;IAC1B,MAAM,MAAM,MAAM,yHAAG,CAAC,IAAI,CAAC,eAAe;IAC1C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa;IACxB,MAAM,MAAM,MAAM,yHAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa;IACxB,MAAM,MAAM,MAAM,yHAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO;IAI/B,MAAM,MAAM,MAAM,yHAAG,CAAC,IAAI,CAAC,UAAU;IACrC,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO,IAAY;IAC3C,MAAM,MAAM,MAAM,yHAAG,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,IAAI,EAAE;IAC1C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO;IAC/B,MAAM,MAAM,MAAM,yHAAG,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,IAAI;IAC3C,OAAO,IAAI,IAAI;AACjB;AAGO,MAAM,eAAe,OAAO;IACjC,MAAM,MAAM,MAAM,yHAAG,CAAC,IAAI,CAAC,kBAAkB;QAAE;IAAW;IAC1D,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/components/TodoList.tsx"],"sourcesContent":["// components/TodoList.tsx\r\n\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { DndContext, closestCenter, PointerSensor, useSensor, useSensors } from \"@dnd-kit/core\";\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  verticalListSortingStrategy,\r\n  useSortable,\r\n} from \"@dnd-kit/sortable\";\r\nimport { CSS } from \"@dnd-kit/utilities\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"./AuthProvider\";\r\nimport {\r\n  fetchTodos,\r\n  createTodo,\r\n  updateTodo,\r\n  deleteTodo,\r\n  reorderTodos,\r\n} from \"../lib/auth\"; // or lib/apiClient functions\r\n\r\ntype Todo = { id: string; title: string; completed?: boolean; description?: string };\r\n\r\nfunction SortableItem({ todo, onEdit, onDelete }: { todo: Todo; onEdit: (t: Todo) => void; onDelete: (id: string) => void }) {\r\n  const { attributes, listeners, setNodeRef, transform, transition } = useSortable({ id: todo.id });\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n  };\r\n\r\n  return (\r\n    <div ref={setNodeRef} style={style} className=\"p-3 bg-white rounded shadow mb-2 flex justify-between items-center\">\r\n      <div {...attributes} {...listeners} className=\"cursor-grab\">\r\n        <div className=\"font-medium\">{todo.title}</div>\r\n        {todo.description && <div className=\"text-sm text-slate-500\">{todo.description}</div>}\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        <button onClick={() => onEdit(todo)} className=\"text-xs px-2 py-1 border rounded\">Edit</button>\r\n        <button onClick={() => onDelete(todo.id)} className=\"text-xs px-2 py-1 border rounded\">Delete</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function TodoList() {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n  const [todos, setTodos] = useState<Todo[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const sensors = useSensors(useSensor(PointerSensor));\r\n\r\n  // Check authentication on mount\r\n  useEffect(() => {\r\n    if (!auth?.user || !auth?.token) {\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n  }, [auth, router]);\r\n\r\n  useEffect(() => {\r\n    // Only fetch todos if user is authenticated\r\n    if (!auth?.user || !auth?.token) return;\r\n    \r\n    fetchTodos().then((res) => {\r\n      // adjust depending on API shape: res.todos vs res\r\n      setTodos(res.todos ?? res);\r\n    }).finally(()=>setLoading(false));\r\n  }, [auth?.user, auth?.token]);\r\n\r\n  const handleDragEnd = async (event: any) => {\r\n    const { active, over } = event;\r\n    if (active.id !== over?.id) {\r\n      const oldIndex = todos.findIndex((t) => t.id === active.id);\r\n      const newIndex = todos.findIndex((t) => t.id === over.id);\r\n      const newTodos = arrayMove(todos, oldIndex, newIndex);\r\n      setTodos(newTodos);\r\n      // persist new order: send array of ids\r\n      try {\r\n        await reorderTodos(newTodos.map(t => t.id));\r\n      } catch (err) {\r\n        console.error(\"Reorder failed, you might want to refetch or rollback.\", err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCreate = async (title: string) => {\r\n    const res = await createTodo({ title });\r\n    setTodos((p) => [res, ...p]);\r\n  };\r\n\r\n  const handleUpdate = async (id: string, payload: Partial<Todo>) => {\r\n    const res = await updateTodo(id, payload);\r\n    setTodos((p) => p.map(t => t.id === id ? res : t));\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    await deleteTodo(id);\r\n    setTodos((p) => p.filter(t => t.id !== id));\r\n  };\r\n\r\n  // Show loading or redirect message if not authenticated\r\n  if (!auth?.user || !auth?.token) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-lg\">Please login to access your todos</p>\r\n          <p className=\"text-sm text-gray-500 mt-2\">Redirecting...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"mb-4\">\r\n        <CreateTodo onCreate={handleCreate} />\r\n      </div>\r\n\r\n      <DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd}>\r\n        <SortableContext items={todos.map(t => t.id)} strategy={verticalListSortingStrategy}>\r\n          {todos.map(todo => (\r\n            <SortableItem key={todo.id} todo={todo} onEdit={(t)=>handleUpdate(t.id,t)} onDelete={handleDelete} />\r\n          ))}\r\n        </SortableContext>\r\n      </DndContext>\r\n    </div>\r\n  );\r\n}\r\n\r\n// small create component\r\nfunction CreateTodo({ onCreate }: { onCreate: (title: string) => void }) {\r\n  const [title, setTitle] = useState(\"\");\r\n  return (\r\n    <form onSubmit={(e) => { e.preventDefault(); if (!title) return; onCreate(title); setTitle(\"\"); }} className=\"flex gap-2\">\r\n      <input value={title} onChange={(e)=>setTitle(e.target.value)} className=\"flex-1 p-2 border rounded\" placeholder=\"Add todo...\" />\r\n      <button type=\"submit\" className=\"px-4 py-2 rounded bg-blue-600 text-white\">Add</button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 497, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"./AuthProvider\";\r\n\r\nexport function ProtectedRoute({ children }: { children: React.ReactNode }) {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!auth?.user || !auth?.token) {\r\n      router.push(\"/login\");\r\n    }\r\n  }, [auth, router]);\r\n\r\n  if (!auth?.user || !auth?.token) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-lg\">Redirecting to login...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMO,SAAS,eAAe,EAAE,QAAQ,EAAiC;IACxE,MAAM,OAAO,IAAA,sIAAO;IACpB,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM,QAAQ,CAAC,MAAM,OAAO;YAC/B,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAM;KAAO;IAEjB,IAAI,CAAC,MAAM,QAAQ,CAAC,MAAM,OAAO;QAC/B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAU;;;;;;;;;;;;;;;;IAI/B;IAEA,qBAAO;kBAAG;;AACZ"}}]
}