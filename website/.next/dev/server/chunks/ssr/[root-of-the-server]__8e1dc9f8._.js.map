{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"./AuthProvider\";\r\n\r\nexport function ProtectedRoute({ children }: { children: React.ReactNode }) {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!auth?.user || !auth?.token) {\r\n      router.push(\"/login\");\r\n    }\r\n  }, [auth, router]);\r\n\r\n  if (!auth?.user || !auth?.token) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-lg\">Redirecting to login...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMO,SAAS,eAAe,EAAE,QAAQ,EAAiC;IACxE,MAAM,OAAO,IAAA,sIAAO;IACpB,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM,QAAQ,CAAC,MAAM,OAAO;YAC/B,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAM;KAAO;IAEjB,IAAI,CAAC,MAAM,QAAQ,CAAC,MAAM,OAAO;QAC/B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAU;;;;;;;;;;;;;;;;IAI/B;IAEA,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/lib/apiHook.ts"],"sourcesContent":["import axios from \"axios\";\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"https://todo-app.pioneeralpha.com\";\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport const setAuthToken = (token?: string) => {\r\n  if (token) api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n  else delete api.defaults.headers.common[\"Authorization\"];\r\n};\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;;;AAAA;;AACA,MAAM,WAAW,QAAQ,GAAG,CAAC,oBAAoB,IAAI;AAErD,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEO,MAAM,eAAe,CAAC;IAC3B,IAAI,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;SACtE,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;AAC1D;uCAEe"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/lib/auth.ts"],"sourcesContent":["// lib/auth.ts\r\nimport api, { setAuthToken } from \"./apiHook\";\r\n\r\nconst TOKEN_KEY = \"todo_token\";\r\n\r\nexport const saveToken = (token: string) => {\r\n  localStorage.setItem(TOKEN_KEY, token);\r\n  setAuthToken(token);\r\n};\r\n\r\nexport const loadToken = () => {\r\n  const t = localStorage.getItem(TOKEN_KEY);\r\n  if (t) setAuthToken(t);\r\n  return t;\r\n};\r\n\r\nexport const clearToken = () => {\r\n  localStorage.removeItem(TOKEN_KEY);\r\n  setAuthToken(undefined);\r\n};\r\n\r\n// API calls matching Django backend endpoints\r\nexport const signup = async (data: {\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  password: string;\r\n}) => {\r\n  const res = await api.post(\"/api/users/signup/\", data);\r\n  return res.data;\r\n};\r\n\r\nexport const login = async (data: { email: string; password: string }) => {\r\n  // API uses email field for login\r\n  const res = await api.post(\"/api/auth/login/\", {\r\n    email: data.email,\r\n    password: data.password,\r\n  });\r\n  // Django JWT returns { access: \"...\", refresh: \"...\" }\r\n  return res.data;\r\n};\r\n\r\nexport const refreshToken = async (refresh: string) => {\r\n  const res = await api.post(\"/api/auth/refresh/\", { refresh });\r\n  return res.data;\r\n};\r\n\r\nexport const getProfile = async () => {\r\n  const res = await api.get(\"/api/users/me/\");\r\n  return res.data;\r\n};\r\n\r\nexport const changePassword = async (data: {\r\n  old_password: string;\r\n  new_password: string;\r\n}) => {\r\n  const res = await api.post(\"/api/users/change-password/\", data);\r\n  return res.data;\r\n};\r\n\r\nexport const fetchTodos = async () => {\r\n  const res = await api.get(\"/api/todos/\");\r\n  // API returns paginated response with results array\r\n  return res.data.results || res.data;\r\n};\r\n\r\nexport const createTodo = async (payload: {\r\n  title: string;\r\n  description?: string;\r\n  priority?: \"extreme\" | \"moderate\" | \"low\";\r\n  todo_date?: string;\r\n}) => {\r\n  const res = await api.post(\"/api/todos/\", payload);\r\n  return res.data;\r\n};\r\n\r\nexport const updateTodo = async (id: string, payload: any) => {\r\n  const res = await api.patch(`/api/todos/${id}/`, payload);\r\n  return res.data;\r\n};\r\n\r\nexport const deleteTodo = async (id: string) => {\r\n  const res = await api.delete(`/api/todos/${id}/`);\r\n  return res.data;\r\n};\r\n\r\n// Reorder todos by updating position field\r\nexport const reorderTodos = async (todos: Array<{ id: string | number; position: number }>) => {\r\n  // Update each todo's position\r\n  const promises = todos.map((todo, index) =>\r\n    updateTodo(String(todo.id), { position: index + 1 })\r\n  );\r\n  await Promise.all(promises);\r\n};\r\n"],"names":[],"mappings":"AAAA,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACd;;AAEA,MAAM,YAAY;AAEX,MAAM,YAAY,CAAC;IACxB,aAAa,OAAO,CAAC,WAAW;IAChC,IAAA,8HAAY,EAAC;AACf;AAEO,MAAM,YAAY;IACvB,MAAM,IAAI,aAAa,OAAO,CAAC;IAC/B,IAAI,GAAG,IAAA,8HAAY,EAAC;IACpB,OAAO;AACT;AAEO,MAAM,aAAa;IACxB,aAAa,UAAU,CAAC;IACxB,IAAA,8HAAY,EAAC;AACf;AAGO,MAAM,SAAS,OAAO;IAM3B,MAAM,MAAM,MAAM,yHAAG,CAAC,IAAI,CAAC,sBAAsB;IACjD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,QAAQ,OAAO;IAC1B,iCAAiC;IACjC,MAAM,MAAM,MAAM,yHAAG,CAAC,IAAI,CAAC,oBAAoB;QAC7C,OAAO,KAAK,KAAK;QACjB,UAAU,KAAK,QAAQ;IACzB;IACA,uDAAuD;IACvD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,eAAe,OAAO;IACjC,MAAM,MAAM,MAAM,yHAAG,CAAC,IAAI,CAAC,sBAAsB;QAAE;IAAQ;IAC3D,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa;IACxB,MAAM,MAAM,MAAM,yHAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,iBAAiB,OAAO;IAInC,MAAM,MAAM,MAAM,yHAAG,CAAC,IAAI,CAAC,+BAA+B;IAC1D,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa;IACxB,MAAM,MAAM,MAAM,yHAAG,CAAC,GAAG,CAAC;IAC1B,oDAAoD;IACpD,OAAO,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,IAAI;AACrC;AAEO,MAAM,aAAa,OAAO;IAM/B,MAAM,MAAM,MAAM,yHAAG,CAAC,IAAI,CAAC,eAAe;IAC1C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO,IAAY;IAC3C,MAAM,MAAM,MAAM,yHAAG,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,EAAE;IACjD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO;IAC/B,MAAM,MAAM,MAAM,yHAAG,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;IAChD,OAAO,IAAI,IAAI;AACjB;AAGO,MAAM,eAAe,OAAO;IACjC,8BAA8B;IAC9B,MAAM,WAAW,MAAM,GAAG,CAAC,CAAC,MAAM,QAChC,WAAW,OAAO,KAAK,EAAE,GAAG;YAAE,UAAU,QAAQ;QAAE;IAEpD,MAAM,QAAQ,GAAG,CAAC;AACpB"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/app/profile/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/components/AuthProvider\";\r\nimport { ProtectedRoute } from \"@/components/ProtectedRoute\";\r\nimport { getProfile } from \"@/lib/auth\";\r\n\r\nexport default function ProfilePage() {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n  const [profile, setProfile] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (auth?.token) {\r\n      getProfile()\r\n        .then((data) => {\r\n          setProfile(data);\r\n        })\r\n        .catch((err) => {\r\n          console.error(\"Failed to fetch profile:\", err);\r\n        })\r\n        .finally(() => setLoading(false));\r\n    }\r\n  }, [auth?.token]);\r\n\r\n  const handleLogout = () => {\r\n    if (auth) {\r\n      auth.logout();\r\n      router.push(\"/login\");\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <ProtectedRoute>\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <p>Loading profile...</p>\r\n        </div>\r\n      </ProtectedRoute>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ProtectedRoute>\r\n      <div className=\"container mx-auto p-4 max-w-2xl\">\r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <h1 className=\"text-3xl font-bold mb-6\">Profile</h1>\r\n          \r\n          {profile?.profile_image && (\r\n            <div className=\"mb-6\">\r\n              <img\r\n                src={profile.profile_image}\r\n                alt=\"Profile\"\r\n                className=\"w-32 h-32 rounded-full object-cover mx-auto\"\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                First Name\r\n              </label>\r\n              <p className=\"text-lg\">\r\n                {profile?.first_name || auth?.user?.name?.split(\" \")[0] || \"N/A\"}\r\n              </p>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Last Name\r\n              </label>\r\n              <p className=\"text-lg\">\r\n                {profile?.last_name || auth?.user?.name?.split(\" \")[1] || \"N/A\"}\r\n              </p>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Email\r\n              </label>\r\n              <p className=\"text-lg\">{profile?.email || auth?.user?.email || \"N/A\"}</p>\r\n            </div>\r\n\r\n            {profile?.address && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Address\r\n                </label>\r\n                <p className=\"text-lg\">{profile.address}</p>\r\n              </div>\r\n            )}\r\n\r\n            {profile?.contact_number && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Contact Number\r\n                </label>\r\n                <p className=\"text-lg\">{profile.contact_number}</p>\r\n              </div>\r\n            )}\r\n\r\n            {profile?.birthday && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Birthday\r\n                </label>\r\n                <p className=\"text-lg\">{new Date(profile.birthday).toLocaleDateString()}</p>\r\n              </div>\r\n            )}\r\n\r\n            {profile?.bio && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Bio\r\n                </label>\r\n                <p className=\"text-lg\">{profile.bio}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mt-8 flex gap-4 flex-wrap\">\r\n            <button\r\n              onClick={() => router.push(\"/todos\")}\r\n              className=\"px-6 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition\"\r\n            >\r\n              Back to Todos\r\n            </button>\r\n            <button\r\n              onClick={() => router.push(\"/change-password\")}\r\n              className=\"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\r\n            >\r\n              Change Password\r\n            </button>\r\n            <button\r\n              onClick={handleLogout}\r\n              className=\"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition\"\r\n            >\r\n              Logout\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,OAAO,IAAA,sIAAO;IACpB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAM;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,OAAO;YACf,IAAA,yHAAU,IACP,IAAI,CAAC,CAAC;gBACL,WAAW;YACb,GACC,KAAK,CAAC,CAAC;gBACN,QAAQ,KAAK,CAAC,4BAA4B;YAC5C,GACC,OAAO,CAAC,IAAM,WAAW;QAC9B;IACF,GAAG;QAAC,MAAM;KAAM;IAEhB,MAAM,eAAe;QACnB,IAAI,MAAM;YACR,KAAK,MAAM;YACX,OAAO,IAAI,CAAC;QACd;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC,+IAAc;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;8BAAE;;;;;;;;;;;;;;;;IAIX;IAEA,qBACE,8OAAC,+IAAc;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA0B;;;;;;oBAEvC,SAAS,+BACR,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,KAAK,QAAQ,aAAa;4BAC1B,KAAI;4BACJ,WAAU;;;;;;;;;;;kCAKhB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCAAE,WAAU;kDACV,SAAS,cAAc,MAAM,MAAM,MAAM,MAAM,IAAI,CAAC,EAAE,IAAI;;;;;;;;;;;;0CAI/D,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCAAE,WAAU;kDACV,SAAS,aAAa,MAAM,MAAM,MAAM,MAAM,IAAI,CAAC,EAAE,IAAI;;;;;;;;;;;;0CAI9D,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCAAE,WAAU;kDAAW,SAAS,SAAS,MAAM,MAAM,SAAS;;;;;;;;;;;;4BAGhE,SAAS,yBACR,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCAAE,WAAU;kDAAW,QAAQ,OAAO;;;;;;;;;;;;4BAI1C,SAAS,gCACR,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCAAE,WAAU;kDAAW,QAAQ,cAAc;;;;;;;;;;;;4BAIjD,SAAS,0BACR,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCAAE,WAAU;kDAAW,IAAI,KAAK,QAAQ,QAAQ,EAAE,kBAAkB;;;;;;;;;;;;4BAIxE,SAAS,qBACR,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,8OAAC;wCAAE,WAAU;kDAAW,QAAQ,GAAG;;;;;;;;;;;;;;;;;;kCAKzC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;0CACX;;;;;;0CAGD,8OAAC;gCACC,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;0CACX;;;;;;0CAGD,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}}]
}