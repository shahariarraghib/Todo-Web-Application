{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"./AuthProvider\";\r\n\r\nexport function ProtectedRoute({ children }: { children: React.ReactNode }) {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!auth?.user || !auth?.token) {\r\n      router.push(\"/login\");\r\n    }\r\n  }, [auth, router]);\r\n\r\n  if (!auth?.user || !auth?.token) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-lg\">Redirecting to login...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMO,SAAS,eAAe,EAAE,QAAQ,EAAiC;;IACxE,MAAM,OAAO,IAAA,yIAAO;IACpB,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,MAAM,QAAQ,CAAC,MAAM,OAAO;gBAC/B,OAAO,IAAI,CAAC;YACd;QACF;mCAAG;QAAC;QAAM;KAAO;IAEjB,IAAI,CAAC,MAAM,QAAQ,CAAC,MAAM,OAAO;QAC/B,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAE,WAAU;8BAAU;;;;;;;;;;;;;;;;IAI/B;IAEA,qBAAO;kBAAG;;AACZ;GArBgB;;QACD,yIAAO;QACL,kJAAS;;;KAFV"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/lib/apiHook.ts"],"sourcesContent":["import axios from \"axios\";\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"https://todo-app.pioneeralpha.com\";\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport const setAuthToken = (token?: string) => {\r\n  if (token) api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n  else delete api.defaults.headers.common[\"Authorization\"];\r\n};\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;;;AACiB;AADjB;;AACA,MAAM,WAAW,2KAAO,CAAC,GAAG,CAAC,oBAAoB,IAAI;AAErD,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEO,MAAM,eAAe,CAAC;IAC3B,IAAI,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;SACtE,OAAO,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB;AAC1D;uCAEe"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/lib/auth.ts"],"sourcesContent":["// lib/auth.ts\r\nimport api, { setAuthToken } from \"./apiHook\";\r\n\r\nconst TOKEN_KEY = \"todo_token\";\r\n\r\nexport const saveToken = (token: string) => {\r\n  localStorage.setItem(TOKEN_KEY, token);\r\n  setAuthToken(token);\r\n};\r\n\r\nexport const loadToken = () => {\r\n  const t = localStorage.getItem(TOKEN_KEY);\r\n  if (t) setAuthToken(t);\r\n  return t;\r\n};\r\n\r\nexport const clearToken = () => {\r\n  localStorage.removeItem(TOKEN_KEY);\r\n  setAuthToken(undefined);\r\n};\r\n\r\n// API calls matching Django backend endpoints\r\nexport const signup = async (data: {\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  password: string;\r\n}) => {\r\n  const res = await api.post(\"/api/users/signup/\", data);\r\n  return res.data;\r\n};\r\n\r\nexport const login = async (data: { email: string; password: string }) => {\r\n  // API uses email field for login\r\n  const res = await api.post(\"/api/auth/login/\", {\r\n    email: data.email,\r\n    password: data.password,\r\n  });\r\n  // Django JWT returns { access: \"...\", refresh: \"...\" }\r\n  return res.data;\r\n};\r\n\r\nexport const refreshToken = async (refresh: string) => {\r\n  const res = await api.post(\"/api/auth/refresh/\", { refresh });\r\n  return res.data;\r\n};\r\n\r\nexport const getProfile = async () => {\r\n  const res = await api.get(\"/api/users/me/\");\r\n  return res.data;\r\n};\r\n\r\nexport const changePassword = async (data: {\r\n  old_password: string;\r\n  new_password: string;\r\n}) => {\r\n  const res = await api.post(\"/api/users/change-password/\", data);\r\n  return res.data;\r\n};\r\n\r\nexport const fetchTodos = async () => {\r\n  const res = await api.get(\"/api/todos/\");\r\n  // API returns paginated response with results array\r\n  return res.data.results || res.data;\r\n};\r\n\r\nexport const createTodo = async (payload: {\r\n  title: string;\r\n  description?: string;\r\n  priority?: \"extreme\" | \"moderate\" | \"low\";\r\n  todo_date?: string;\r\n}) => {\r\n  const res = await api.post(\"/api/todos/\", payload);\r\n  return res.data;\r\n};\r\n\r\nexport const updateTodo = async (id: string, payload: any) => {\r\n  const res = await api.patch(`/api/todos/${id}/`, payload);\r\n  return res.data;\r\n};\r\n\r\nexport const deleteTodo = async (id: string) => {\r\n  const res = await api.delete(`/api/todos/${id}/`);\r\n  return res.data;\r\n};\r\n\r\n// Reorder todos by updating position field\r\nexport const reorderTodos = async (todos: Array<{ id: string | number; position: number }>) => {\r\n  // Update each todo's position\r\n  const promises = todos.map((todo, index) =>\r\n    updateTodo(String(todo.id), { position: index + 1 })\r\n  );\r\n  await Promise.all(promises);\r\n};\r\n"],"names":[],"mappings":"AAAA,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACd;;AAEA,MAAM,YAAY;AAEX,MAAM,YAAY,CAAC;IACxB,aAAa,OAAO,CAAC,WAAW;IAChC,IAAA,iIAAY,EAAC;AACf;AAEO,MAAM,YAAY;IACvB,MAAM,IAAI,aAAa,OAAO,CAAC;IAC/B,IAAI,GAAG,IAAA,iIAAY,EAAC;IACpB,OAAO;AACT;AAEO,MAAM,aAAa;IACxB,aAAa,UAAU,CAAC;IACxB,IAAA,iIAAY,EAAC;AACf;AAGO,MAAM,SAAS,OAAO;IAM3B,MAAM,MAAM,MAAM,4HAAG,CAAC,IAAI,CAAC,sBAAsB;IACjD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,QAAQ,OAAO;IAC1B,iCAAiC;IACjC,MAAM,MAAM,MAAM,4HAAG,CAAC,IAAI,CAAC,oBAAoB;QAC7C,OAAO,KAAK,KAAK;QACjB,UAAU,KAAK,QAAQ;IACzB;IACA,uDAAuD;IACvD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,eAAe,OAAO;IACjC,MAAM,MAAM,MAAM,4HAAG,CAAC,IAAI,CAAC,sBAAsB;QAAE;IAAQ;IAC3D,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa;IACxB,MAAM,MAAM,MAAM,4HAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,iBAAiB,OAAO;IAInC,MAAM,MAAM,MAAM,4HAAG,CAAC,IAAI,CAAC,+BAA+B;IAC1D,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa;IACxB,MAAM,MAAM,MAAM,4HAAG,CAAC,GAAG,CAAC;IAC1B,oDAAoD;IACpD,OAAO,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,IAAI;AACrC;AAEO,MAAM,aAAa,OAAO;IAM/B,MAAM,MAAM,MAAM,4HAAG,CAAC,IAAI,CAAC,eAAe;IAC1C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO,IAAY;IAC3C,MAAM,MAAM,MAAM,4HAAG,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,EAAE;IACjD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO;IAC/B,MAAM,MAAM,MAAM,4HAAG,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;IAChD,OAAO,IAAI,IAAI;AACjB;AAGO,MAAM,eAAe,OAAO;IACjC,8BAA8B;IAC9B,MAAM,WAAW,MAAM,GAAG,CAAC,CAAC,MAAM,QAChC,WAAW,OAAO,KAAK,EAAE,GAAG;YAAE,UAAU,QAAQ;QAAE;IAEpD,MAAM,QAAQ,GAAG,CAAC;AACpB"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///D:/assessment%20for%20job/Todo%20Web%20Application/website/app/change-password/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { ProtectedRoute } from \"@/components/ProtectedRoute\";\r\nimport { changePassword } from \"@/lib/auth\";\r\n\r\ntype FormData = {\r\n  old_password: string;\r\n  new_password: string;\r\n  confirm_password: string;\r\n};\r\n\r\nexport default function ChangePasswordPage() {\r\n  const { register, handleSubmit, watch, formState: { errors } } = useForm<FormData>();\r\n  const router = useRouter();\r\n  const [error, setError] = useState<string>(\"\");\r\n  const [success, setSuccess] = useState<string>(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const newPassword = watch(\"new_password\");\r\n\r\n  const onSubmit = async (data: FormData) => {\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { confirm_password, ...changePasswordData } = data;\r\n      await changePassword(changePasswordData);\r\n      setSuccess(\"Password changed successfully!\");\r\n      \r\n      // Redirect to profile after 2 seconds\r\n      setTimeout(() => {\r\n        router.push(\"/profile\");\r\n      }, 2000);\r\n    } catch (err: any) {\r\n      setError(\r\n        err?.response?.data?.detail ||\r\n        err?.response?.data?.message ||\r\n        err?.message ||\r\n        \"Failed to change password\"\r\n      );\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ProtectedRoute>\r\n      <div className=\"min-h-screen flex items-center justify-center bg-slate-50\">\r\n        <form\r\n          onSubmit={handleSubmit(onSubmit)}\r\n          className=\"bg-white p-8 rounded-lg shadow-md w-full max-w-md\"\r\n        >\r\n          <h2 className=\"text-2xl font-semibold mb-4\">Change Password</h2>\r\n\r\n          <label className=\"block mb-2\">\r\n            Old Password\r\n            <input\r\n              {...register(\"old_password\", {\r\n                required: \"Old password is required\",\r\n              })}\r\n              type=\"password\"\r\n              className=\"w-full mt-1 p-2 border rounded\"\r\n            />\r\n            {errors.old_password && (\r\n              <p className=\"text-red-500 text-xs mt-1\">\r\n                {errors.old_password.message}\r\n              </p>\r\n            )}\r\n          </label>\r\n\r\n          <label className=\"block mb-2\">\r\n            New Password\r\n            <input\r\n              {...register(\"new_password\", {\r\n                required: \"New password is required\",\r\n                minLength: {\r\n                  value: 6,\r\n                  message: \"Password must be at least 6 characters\",\r\n                },\r\n              })}\r\n              type=\"password\"\r\n              className=\"w-full mt-1 p-2 border rounded\"\r\n            />\r\n            {errors.new_password && (\r\n              <p className=\"text-red-500 text-xs mt-1\">\r\n                {errors.new_password.message}\r\n              </p>\r\n            )}\r\n          </label>\r\n\r\n          <label className=\"block mb-4\">\r\n            Confirm New Password\r\n            <input\r\n              {...register(\"confirm_password\", {\r\n                required: \"Please confirm your new password\",\r\n                validate: (value) =>\r\n                  value === newPassword || \"Passwords do not match\",\r\n              })}\r\n              type=\"password\"\r\n              className=\"w-full mt-1 p-2 border rounded\"\r\n            />\r\n            {errors.confirm_password && (\r\n              <p className=\"text-red-500 text-xs mt-1\">\r\n                {errors.confirm_password.message}\r\n              </p>\r\n            )}\r\n          </label>\r\n\r\n          {error && (\r\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {success && (\r\n            <div className=\"mb-4 p-3 bg-green-50 border border-green-200 rounded text-green-700 text-sm\">\r\n              {success}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex gap-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => router.push(\"/profile\")}\r\n              className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition\"\r\n              disabled={loading}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"flex-1 px-4 py-2 bg-primary text-white rounded hover:bg-blue-700 transition disabled:opacity-50\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? \"Changing...\" : \"Change Password\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAce,SAAS;;IACtB,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,EAAE,GAAG,IAAA,4KAAO;IACxE,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAS;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAS;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,cAAc,MAAM;IAE1B,MAAM,WAAW,OAAO;QACtB,SAAS;QACT,WAAW;QACX,WAAW;QAEX,IAAI;YACF,MAAM,EAAE,gBAAgB,EAAE,GAAG,oBAAoB,GAAG;YACpD,MAAM,IAAA,gIAAc,EAAC;YACrB,WAAW;YAEX,sCAAsC;YACtC,WAAW;gBACT,OAAO,IAAI,CAAC;YACd,GAAG;QACL,EAAE,OAAO,KAAU;YACjB,SACE,KAAK,UAAU,MAAM,UACrB,KAAK,UAAU,MAAM,WACrB,KAAK,WACL;QAEJ,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC,kJAAc;kBACb,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBACC,UAAU,aAAa;gBACvB,WAAU;;kCAEV,6LAAC;wBAAG,WAAU;kCAA8B;;;;;;kCAE5C,6LAAC;wBAAM,WAAU;;4BAAa;0CAE5B,6LAAC;gCACE,GAAG,SAAS,gBAAgB;oCAC3B,UAAU;gCACZ,EAAE;gCACF,MAAK;gCACL,WAAU;;;;;;4BAEX,OAAO,YAAY,kBAClB,6LAAC;gCAAE,WAAU;0CACV,OAAO,YAAY,CAAC,OAAO;;;;;;;;;;;;kCAKlC,6LAAC;wBAAM,WAAU;;4BAAa;0CAE5B,6LAAC;gCACE,GAAG,SAAS,gBAAgB;oCAC3B,UAAU;oCACV,WAAW;wCACT,OAAO;wCACP,SAAS;oCACX;gCACF,EAAE;gCACF,MAAK;gCACL,WAAU;;;;;;4BAEX,OAAO,YAAY,kBAClB,6LAAC;gCAAE,WAAU;0CACV,OAAO,YAAY,CAAC,OAAO;;;;;;;;;;;;kCAKlC,6LAAC;wBAAM,WAAU;;4BAAa;0CAE5B,6LAAC;gCACE,GAAG,SAAS,oBAAoB;oCAC/B,UAAU;oCACV,UAAU,CAAC,QACT,UAAU,eAAe;gCAC7B,EAAE;gCACF,MAAK;gCACL,WAAU;;;;;;4BAEX,OAAO,gBAAgB,kBACtB,6LAAC;gCAAE,WAAU;0CACV,OAAO,gBAAgB,CAAC,OAAO;;;;;;;;;;;;oBAKrC,uBACC,6LAAC;wBAAI,WAAU;kCACZ;;;;;;oBAIJ,yBACC,6LAAC;wBAAI,WAAU;kCACZ;;;;;;kCAIL,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,MAAK;gCACL,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;gCACV,UAAU;0CACX;;;;;;0CAGD,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,UAAU;0CAET,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOzC;GAlIwB;;QAC2C,4KAAO;QACzD,kJAAS;;;KAFF"}}]
}